<div class="container">
    <mat-card>
        <mat-card-title>Create city</mat-card-title>
        <mat-card-content>
            <form [formGroup]="form" class="search">
                <mat-form-field>
                    <mat-label>Countries</mat-label>
                    <input
                        matInput
                        formControlName="city"
                        required
                        minlength="3"
                        >
                    <mat-hint>(3 or more)</mat-hint>
                    <mat-error *ngIf="form.controls['city'].errors?.['countryNotChosen']; else invalidForm">choose a country</mat-error>

                    <ng-template #invalidForm>
                        <mat-error>invalid country name</mat-error>
                    </ng-template>
                </mat-form-field>

                <app-country-search-form [countries]="countries" (countryEvent)="setCountry($event)"></app-country-search-form>

                <button mat-button (click)="sendForm()" [disabled]="bisy">Add</button>
            </form>
            
            <ng-container>
                <span *ngIf="failed" class="error">Adding failed</span>
                <span *ngIf="completed" class="success">Succesfully added</span>
            </ng-container>
        </mat-card-content>
    </mat-card>
</div>